CREATE TABLE CUSTOMER
(
    CUSTOMER_ID INT (10) PRIMARY KEY,
    STATUS VARCHAR (20),
    FIRST_NAME VARCHAR (14),
    LAST_NAME VARCHAR (14),
    CNIC INT(12),
    EMAIL VARCHAR(30),
    CUSTOMER_PASSWORD VARCHAR(20) ,
    DATE_OF_BIRTH DATE ,
    GENDER VARCHAR(6),
    COUNTRY VARCHAR(10),
    CITY VARCHAR(10),
    ZIPCODE INT(10)
);


CREATE TABLE ADDRESS
(
    CUSTOMER_ID INT(10),
    ADDRESS VARCHAR (30)
   
);


CREATE TABLE PHONE_NUMBER
(
    CUSTOMER_ID INT (10),
    PHONE_NUMBER INT (11)
 
);

CREATE TABLE TICKET
(  
    TICKET_ID  VARCHAR(20)PRIMARY KEY,
    TICKET_TYPE VARCHAR(20),
    CUSTOMER_ID INT (10),
    FLIGHT_NUMBER VARCHAR(20),
    DEPARTURE_TIME DATETIME,
    PAYMENT_ID VARCHAR(20)
   
);
CREATE TABLE SOURCE_PLACE
(
    TICKET_ID  VARCHAR(20),
    SOURCE_PLACE VARCHAR(20)
);
CREATE TABLE DESTINATION
(
    TICKET_ID  VARCHAR(20),
    DESTINATION VARCHAR(20)
);
CREATE TABLE FLIGHT
(
    FLIGHT_NUMBER VARCHAR(20),
    FLIGHT_SOURCE VARCHAR(20),
    FLIGHT_DESTINATION VARCHAR(20),
    DEPARTURE_TIME DATETIME,
    AIRLINE_ID VARCHAR(20),
    ADMIN_ID VARCHAR(20),
    PRIMARY KEY(FLIGHT_NUMBER,DEPARTURE_TIME)
);

CREATE TABLE TEMP
(
    FLIGHT_NUMBER VARCHAR(20),
    FLIGHT_SOURCE VARCHAR(20),
    FLIGHT_DESTINATION VARCHAR(20),
    DEPARTURE_TIME DATETIME,
    AIRLINE_ID VARCHAR(20),
    ADMIN_ID VARCHAR(20)
);

CREATE TABLE TEMP_CLASS
(
    FLIGHT_NUMBER VARCHAR(20),
    FLIGHT_CLASS VARCHAR(20),
    DEPARTURE_TIME DATETIME,
    NO_OF_SEATS INT(10),
    PRICE INT(15)
);

CREATE TABLE FLIGHT_CLASS
(
    FLIGHT_NUMBER VARCHAR(20),
    FLIGHT_CLASS VARCHAR(20),
    DEPARTURE_TIME DATETIME,
    NO_OF_SEATS INT(10),
    PRICE INT(15)
   
);

CREATE TABLE AIRLINE
(
    AIRLINE_ID VARCHAR(20) PRIMARY KEY,
    AIRLINE_NAME VARCHAR(20),
    AIRLINE_PASSWORD VARCHAR(20)
);
CREATE TABLE ADMIN
(
    ADMIN_ID VARCHAR(20) PRIMARY KEY,
    ADMIN_PASSWORD VARCHAR(20)
);

CREATE TABLE PAYMENT
(
    PAYMENT_ID VARCHAR(20) PRIMARY KEY,
    AMOUNT INT(10),
    CUSTOMER_ID INT (10),
    DCARD_NUMBER INT(20),
    CCARD_NUMBER INT(20)
);
CREATE TABLE CREDIT_CARD
(
    CCARD_NUMBER INT(20)PRIMARY KEY,
    BALANCE INT(10),
    STATUS VARCHAR(20)
);
CREATE TABLE DEBIT_CARD
(
    DCARD_NUMBER INT(20)PRIMARY KEY,
    BALANCE INT(10),
    STATUS VARCHAR(20)
);
CREATE TABLE PURCHASE_HISTORY
(
    TICKET_STATUS VARCHAR(20),
    AMOUNT INT(10),
    CUSTOMER_ID INT(10)
);



ALTER TABLE ADDRESS
ADD FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMER(CUSTOMER_ID);

ALTER TABLE PHONE_NUMBER
ADD FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMER(CUSTOMER_ID);

ALTER TABLE TICKET
ADD FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMER(CUSTOMER_ID);

ALTER TABLE TICKET
ADD FOREIGN KEY (PAYMENT_ID) REFERENCES PAYMENT(PAYMENT_ID);

ALTER TABLE TICKET
ADD FOREIGN KEY (FLIGHT_NUMBER,DEPARTURE_TIME) REFERENCES FLIGHT(FLIGHT_NUMBER,DEPARTURE_TIME);


ALTER TABLE FLIGHT
ADD FOREIGN KEY (AIRLINE_ID) REFERENCES AIRLINE(AIRLINE_ID);

ALTER TABLE FLIGHT
ADD FOREIGN KEY (ADMIN_ID) REFERENCES ADMIN(ADMIN_ID);


ALTER TABLE PAYMENT
ADD FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMER(CUSTOMER_ID);

ALTER TABLE PAYMENT
ADD FOREIGN KEY (DCARD_NUMBER) REFERENCES DEBIT_CARD(DCARD_NUMBER);

ALTER TABLE PAYMENT
ADD FOREIGN KEY (CCARD_NUMBER) REFERENCES CREDIT_CARD(CCARD_NUMBER);

ALTER TABLE PURCHASE_HISTORY
ADD FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMER(CUSTOMER_ID);

ALTER TABLE FLIGHT_CLASS
ADD FOREIGN KEY (FLIGHT_NUMBER,DEPARTURE_TIME) REFERENCES FLIGHT(FLIGHT_NUMBER,DEPARTURE_TIME);


ALTER TABLE SOURCE_PLACE
ADD FOREIGN KEY(TICKET_ID) REFERENCES TICKET(TICKET_ID);

ALTER TABLE DESTINATION
ADD FOREIGN KEY(TICKET_ID) REFERENCES TICKET(TICKET_ID);

ALTER TABLE DESTINATION
ADD PRIMARY KEY(TICKET_ID,DESTINATION);

ALTER TABLE SOURCE_PLACE
ADD PRIMARY KEY(TICKET_ID,SOURCE_PLACE);

ALTER TABLE FLIGHT_CLASS
ADD PRIMARY KEY(FLIGHT_NUMBER,FLIGHT_CLASS,DEPARTURE_TIME);

ALTER TABLE PURCHASE_HISTORY
ADD PRIMARY KEY (CUSTOMER_ID);

ALTER TABLE ADDRESS
ADD PRIMARY KEY(CUSTOMER_ID,ADDRESS);

ALTER TABLE PHONE_NUMBER
ADD PRIMARY KEY(CUSTOMER_ID,PHONE_NUMBER);
